FROM python:3.10

RUN mkdir /support
WORKDIR /support

RUN apt-get update
RUN apt-get -y install python3-pip
RUN python -m pip install --upgrade pip

RUN pip install -U curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -
ENV PATH="${PATH}:/root/.poetry/bin"

WORKDIR /support/backend
COPY . ./poetry.lock/
COPY . ./pyproject.toml/
RUN poetry config virtualenvs.create false && poetry install --no-interaction --no-ansi

ADD docker-entrypoint.sh /docker-entrypoint.sh
RUN chmod a+x /docker-entrypoint.sh
ENTRYPOINT ["/docker-entrypoint.sh"]




